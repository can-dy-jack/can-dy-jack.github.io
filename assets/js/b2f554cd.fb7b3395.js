"use strict";(self.webpackChunknew_blog=self.webpackChunknew_blog||[]).push([[477],{10:function(r){r.exports=JSON.parse('{"blogPosts":[{"id":"/2022/08/27/module-standard","metadata":{"permalink":"/blog/2022/08/27/module-standard","editUrl":"https://github.com/can-dy-jack/can-dy-jack.github.io/blog/2022-08-27-module-standard.md","source":"@site/blog/2022-08-27-module-standard.md","title":"Javascript \u51e0\u79cd\u6a21\u5757\u5316\u6807\u51c6","description":"\u5386\u53f2\u4e0a\uff0cJavaScript \u4e00\u76f4\u6ca1\u6709\u6a21\u5757\uff08module\uff09\u4f53\u7cfb\uff0c\u65e0\u6cd5\u5c06\u4e00\u4e2a\u5927\u7a0b\u5e8f\u62c6\u5206\u6210\u4e92\u76f8\u4f9d\u8d56\u7684\u5c0f\u6587\u4ef6\uff0c\u518d\u7528\u7b80\u5355\u7684\u65b9\u6cd5\u62fc\u88c5\u8d77\u6765\u3002\u5176\u4ed6\u8bed\u8a00\u90fd\u6709\u8fd9\u9879\u529f\u80fd\uff0c\u6bd4\u5982 Ruby \u7684require\u3001Python \u7684import\uff0c\u751a\u81f3\u5c31\u8fde CSS \u90fd\u6709@import\uff0c\u4f46\u662f JavaScript \u4efb\u4f55\u8fd9\u65b9\u9762\u7684\u652f\u6301\u90fd\u6ca1\u6709\uff0c\u8fd9\u5bf9\u5f00\u53d1\u5927\u578b\u7684\u3001\u590d\u6742\u7684\u9879\u76ee\u5f62\u6210\u4e86\u5de8\u5927\u969c\u788d\u3002","date":"2022-08-27T00:00:00.000Z","formattedDate":"August 27, 2022","tags":[],"readingTime":5.245,"truncated":true,"authors":[{"name":"kart jim","title":"front learner","url":"https://localhost:3000","imageURL":"https://github.com/can-dy-jack.png","key":"can-dy-jack"}],"frontMatter":{"title":"Javascript \u51e0\u79cd\u6a21\u5757\u5316\u6807\u51c6","authors":"can-dy-jack"},"nextItem":{"title":"Javascript\u6570\u7ec4\u53bb\u91cd\u7684\u51e0\u79cd\u65b9\u6cd5","permalink":"/blog/2022/08/22/unique-arr"}},"content":"> \u5386\u53f2\u4e0a\uff0cJavaScript \u4e00\u76f4\u6ca1\u6709\u6a21\u5757\uff08module\uff09\u4f53\u7cfb\uff0c\u65e0\u6cd5\u5c06\u4e00\u4e2a\u5927\u7a0b\u5e8f\u62c6\u5206\u6210\u4e92\u76f8\u4f9d\u8d56\u7684\u5c0f\u6587\u4ef6\uff0c\u518d\u7528\u7b80\u5355\u7684\u65b9\u6cd5\u62fc\u88c5\u8d77\u6765\u3002\u5176\u4ed6\u8bed\u8a00\u90fd\u6709\u8fd9\u9879\u529f\u80fd\uff0c\u6bd4\u5982 Ruby \u7684require\u3001Python \u7684import\uff0c\u751a\u81f3\u5c31\u8fde CSS \u90fd\u6709@import\uff0c\u4f46\u662f JavaScript \u4efb\u4f55\u8fd9\u65b9\u9762\u7684\u652f\u6301\u90fd\u6ca1\u6709\uff0c\u8fd9\u5bf9\u5f00\u53d1\u5927\u578b\u7684\u3001\u590d\u6742\u7684\u9879\u76ee\u5f62\u6210\u4e86\u5de8\u5927\u969c\u788d\u3002\\r\\n\\r\\n\u5728 ES6 \u4e4b\u524d\uff0c\u793e\u533a\u5236\u5b9a\u4e86\u4e00\u4e9b\u6a21\u5757\u52a0\u8f7d\u65b9\u6848\uff0c\u6700\u4e3b\u8981\u7684\u6709 `CommonJS`(`CJS`) \u548c `AMD` \u4e24\u79cd\u3002\u524d\u8005\u7528\u4e8e\u670d\u52a1\u5668\uff0c\u540e\u8005\u7528\u4e8e\u6d4f\u89c8\u5668\u3002  \\r\\n\u800c `ES6` \u5728\u8bed\u8a00\u6807\u51c6\u7684\u5c42\u9762\u4e0a\uff0c\u5b9e\u73b0\u4e86\u6a21\u5757\u529f\u80fd\uff0c\u6210\u4e3a\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u901a\u7528\u7684\u6a21\u5757\u89e3\u51b3\u65b9\u6848\u3002(`ESM` \u3001`ES6\u6a21\u5757`)\\r\\n\\r\\n\x3c!-- truncate --\x3e\\r\\n\\r\\n## CJS\\r\\n\u89c4\u8303\u4ee3\u8868\u5e93\uff1aCommonJS\\r\\n\\r\\n`common.js`\u4e3b\u8981\u7528\u4e8e\u540e\u7aef\uff0c\u5728`nodejs`\u4e2d\uff0cnode\u5e94\u7528\u662f\u7531\u6a21\u5757\u7ec4\u6210\uff0c\u91c7\u7528\u7684`commonjs`\u6a21\u5757\u89c4\u8303\u3002\u6bcf\u4e00\u4e2a\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u6a21\u5757\uff0c\u62e5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u4f5c\u7528\u57df\uff0c\u53d8\u91cf\uff0c\u4ee5\u53ca\u65b9\u6cd5\u7b49\uff0c\u5bf9\u5176\u4ed6\u7684\u6a21\u5757\u90fd\u4e0d\u53ef\u89c1\u3002\\r\\n\\r\\n```js\\r\\nmodule.exports= {} // \u5bfc\u51fa\\r\\n\\r\\nrequire() // \u5bfc\u5165\\r\\n```\\r\\n\\r\\n## AMD\\r\\n\\r\\n\u89c4\u8303\u4ee3\u8868\u5e93\uff1arequire.js\\r\\n\\r\\n`RequireJS` \u662f\u4e00\u4e2aJavaScript\u6a21\u5757\u52a0\u8f7d\u5668\uff08\u6587\u4ef6\u548c\u6a21\u5757\u8f7d\u5165\u5de5\u5177\uff09\uff0c\u4f7f\u7528`RequireJS`\u52a0\u8f7d\u6a21\u5757\u5316\u811a\u672c\u5c06\u63d0\u9ad8\u4ee3\u7801\u7684\u52a0\u8f7d\u901f\u5ea6\u548c\u8d28\u91cf\u5b83\u9488\u5bf9\u6d4f\u89c8\u5668\u4f7f\u7528\u573a\u666f\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5e76\u4e14\u4e5f\u53ef\u4ee5\u5e94\u7528\u5230\u5176\u4ed6 JavaScript \u73af\u5883\u4e2d\uff0c\u4f8b\u5982 Rhino \u548c Node.js\u3002\\r\\n\\r\\n```js\\r\\n/** \u7f51\u9875\u4e2d\u5f15\u5165require.js\u53camain.js **/\\r\\n<script src=\\"js/require.js\\" data-main=\\"js/main\\"><\/script>\\r\\n\\r\\n/** main.js \u5165\u53e3\u6587\u4ef6/\u4e3b\u6a21\u5757 **/\\r\\n// \u9996\u5148\u7528config()\u6307\u5b9a\u5404\u6a21\u5757\u8def\u5f84\u548c\u5f15\u7528\u540d\\r\\nrequire.config({\\r\\n  baseUrl: \\"js/lib\\",\\r\\n  paths: {\\r\\n    \\"jquery\\": \\"jquery.min\\",  //\u5b9e\u9645\u8def\u5f84\u4e3ajs/lib/jquery.min.js\\r\\n    \\"underscore\\": \\"underscore.min\\",\\r\\n  }\\r\\n});\\r\\n// \u6267\u884c\u57fa\u672c\u64cd\u4f5c\\r\\nrequire([\\"jquery\\",\\"underscore\\"],function($,_){\\r\\n  // some code here\\r\\n});\\r\\n```\\r\\n\\r\\n## CMD\\r\\n\\r\\n\u89c4\u8303\u4ee3\u8868\u5e93\uff1asea.js\\r\\n\\r\\n`CMD`\u4e0e`AMD`\u5f88\u7c7b\u4f3c\uff0c\u4e0d\u540c\u70b9\u5728\u4e8e\uff1a`AMD`\u63a8\u5d07\u4f9d\u8d56\u524d\u7f6e\u3001\u63d0\u524d\u6267\u884c;`CMD`\u63a8\u5d07\u4f9d\u8d56\u5c31\u8fd1\u3001\u5ef6\u8fdf\u6267\u884c\u3002\\r\\n\\r\\n\u4ee3\u7801\u793a\u4f8b\uff1a\\r\\n```js\\r\\ndefine(function(require, exports, module) {\\r\\n    var a = require(\'./a\'); //\u5728\u9700\u8981\u65f6\u7533\u660e\\r\\n    a.doSomething();\\r\\n    if (false) {\\r\\n        var b = require(\'./b\');\\r\\n        b.doSomething();\\r\\n    }\\r\\n});\\r\\n\\r\\n/** sea.js **/\\r\\n// \u5b9a\u4e49\u6a21\u5757 math.js\\r\\ndefine(function(require, exports, module) {\\r\\n    var $ = require(\'jquery.js\');\\r\\n    var add = function(a,b){\\r\\n        return a+b;\\r\\n    }\\r\\n    exports.add = add;\\r\\n});\\r\\n\\r\\n// \u52a0\u8f7d\u6a21\u5757\\r\\nseajs.use([\'math.js\'], function(math){\\r\\n    var sum = math.add(1+2);\\r\\n});\\r\\n```\\r\\n\\r\\n## UMD\\r\\n\\r\\n> `UMD`\u89c4\u8303\u53ea\u662f\u4e00\u79cd\u901a\u7528\u7684\u5199\u6cd5\uff0c\u662f\u5728`amd`\u548c`cjs`\u4e24\u4e2a\u6d41\u884c\u800c\u4e0d\u7edf\u4e00\u7684\u89c4\u8303\u60c5\u51b5\u4e0b\uff0c\u624d\u50ac\u751f\u51fa`umd`\u6765\u7edf\u4e00\u89c4\u8303\u7684\uff0c`umd`\u524d\u540e\u7aef\u5747\u53ef\u901a\u7528\u3002\\r\\n\\r\\n\u4ee3\u7801\u793a\u4f8b\uff1a\\r\\n```js\\r\\n(function (root, factory) {\\r\\n    if (typeof define === \'function\' && define.amd) {\\r\\n        // AMD\\r\\n        define([\'jquery\', \'underscore\'], factory);\\r\\n    } else if (typeof exports === \'object\') {\\r\\n        // Node, CommonJS\u4e4b\u7c7b\u7684\\r\\n        module.exports = factory(require(\'jquery\'), require(\'underscore\'));\\r\\n    } else {\\r\\n        // \u6d4f\u89c8\u5668\u5168\u5c40\u53d8\u91cf(root \u5373 window)\\r\\n        root.returnExports = factory(root.jQuery, root._);\\r\\n    }\\r\\n}(this, function ($, _) {\\r\\n    // \u5c5e\u6027\\r\\n    var PI = Math.PI;\\r\\n    \\r\\n    // \u65b9\u6cd5\\r\\n    function a() { };                   // \u79c1\u6709\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u6ca1\u88ab\u8fd4\u56de\\r\\n    function b() { return a() };        // \u516c\u5171\u65b9\u6cd5\uff0c\u56e0\u4e3a\u88ab\u8fd4\u56de\u4e86\\r\\n    function c(x, y) { return x + y };  // \u516c\u5171\u65b9\u6cd5\uff0c\u56e0\u4e3a\u88ab\u8fd4\u56de\u4e86\\r\\n\\r\\n    // \u66b4\u9732\u516c\u5171\u65b9\u6cd5\\r\\n    return {\\r\\n        ip: PI,\\r\\n        b: b,\\r\\n        c: c\\r\\n    }\\r\\n}));\\r\\n```\\r\\n\u5e76\u4e14\u652f\u6301\u76f4\u63a5\u5728\u524d\u7aef\u7528 `<script src=\\"lib.umd.js\\"><\/script>` \u7684\u65b9\u5f0f\u52a0\u8f7d\u3002\\r\\n\\r\\n## ESM\\r\\n\\r\\n`esm`\u89c4\u8303\u662fes6\u539f\u751f\u652f\u6301\u7684\uff0c\u7c7b\u4f3c`commonjs`\u7684\u5199\u6cd5\u7c7b\u4f3c\u3001\u5f02\u6b65\u52a0\u8f7d\u673a\u5236\u80fd\u901a\u8fc7\u8bbe\u7f6e`type=module`\uff0c\u7528\u4e8e`html`\u4e2d\uff0c\u800c\u4e14\u5728node\u4e2d\u4e5f\u652f\u6301\\r\\n\\r\\n```js\\r\\nexport // \u5bfc\u51fa\u6a21\u5757\\r\\nexport default xxx // \u5bfc\u51fa\u6a21\u5757\uff0c\u652f\u6301\u5bfc\u51fa\u540e\u66f4\u6362\u540d\u79f0\\r\\n\\r\\nimport \\"\\"// \u5bfc\u5165\u5168\u90e8\u6a21\u5757\\r\\nimport {xx, xx} from \'./xxx.js\'; // \u5bfc\u5165\u6a21\u5757\u7684\u4e00\u90e8\u5206\uff0c\u8981\u548c\u5bfc\u51fa\u7684\u540d\u5b57\u4e00\u81f4\\r\\nimport xxx from \\"\\"; // \u5bfc\u5165 export default\u5bfc\u51fa\u7684\u6a21\u5757\uff0cxxx\u540d\u79f0\u4e0d\u4e00\u5b9a\u8981\u548c\u5bfc\u51fa\u7684\u540d\u5b57\u4e00\u81f4\\r\\n```\\r\\n\\r\\n\\r\\n`Node.js` \u4e0a\u7684\u6a21\u5757\u6807\u51c6\u6709 `ES6` \u6a21\u5757\u4e0e `CommonJS` \u6a21\u5757\uff0c\u5b83\u4eec\u6709\u4e09\u4e2a\u91cd\u5927\u5dee\u5f02\uff1a\\r\\n- `CommonJS` \u6a21\u5757\u8f93\u51fa\u7684\u662f\u4e00\u4e2a**\u503c\u7684\u62f7\u8d1d**\uff0c`ES6` \u6a21\u5757\u8f93\u51fa\u7684\u662f**\u503c\u7684\u5f15\u7528**\u3002\\r\\n- `CommonJS` \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\uff0c`ES6` \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u8f93\u51fa\u63a5\u53e3\u3002\\r\\n- `CommonJS` \u6a21\u5757\u7684`require()`\u662f\u540c\u6b65\u52a0\u8f7d\u6a21\u5757\uff0c`ES6` \u6a21\u5757\u7684`import`\u547d\u4ee4\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u4f9d\u8d56\u7684\u89e3\u6790\u9636\u6bb5\u3002\\r\\n\\r\\n## IIFE\\r\\n`Immediately Invoked Function Expression`\uff0c\u53ea\u662f\u4e00\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u9690\u85cf\u4e00\u4e9b\u5c40\u90e8\u53d8\u91cf\u3002\\r\\n\\r\\n\u53ef\u4ee5\u7528\u6765\u4ee3\u66ff `UMD` \u4f5c\u4e3a\u7eaf\u7cb9\u7ed9\u524d\u7aef\u4f7f\u7528\u7684\u5199\u6cd5\u3002\\r\\n\\r\\n## \u53c2\u8003\u6587\u7ae0\\r\\n\\r\\n- [Module \u7684\u8bed\u6cd5](https://es6.ruanyifeng.com/#docs/module)\\r\\n- [js\u6a21\u5757\u5316\u7684\u5404\u79cd\u89c4\u8303 \u4e4b CJS\u3001AMD\u3001CMD\u3001UMD\u3001ESM](https://juejin.cn/post/6850418113154908174)\\r\\n- [cjs, umd, esm or iife?](https://zhuanlan.zhihu.com/p/304552279)"},{"id":"/2022/08/22/unique-arr","metadata":{"permalink":"/blog/2022/08/22/unique-arr","editUrl":"https://github.com/can-dy-jack/can-dy-jack.github.io/blog/2022-08-22-unique-arr.md","source":"@site/blog/2022-08-22-unique-arr.md","title":"Javascript\u6570\u7ec4\u53bb\u91cd\u7684\u51e0\u79cd\u65b9\u6cd5","description":"\u8fd9\u91cc\u4e00\u5171\u603b\u7ed3\u4e86  \u65b9\u6cd5\uff1a","date":"2022-08-22T00:00:00.000Z","formattedDate":"August 22, 2022","tags":[],"readingTime":3.73,"truncated":true,"authors":[{"name":"kart jim","title":"\u672c\u535a\u5ba2\u521b\u9020\u8005","url":"https://github.com/can-dy-jack","image_url":"https://github.com/can-dy-jack.png","imageURL":"https://github.com/can-dy-jack.png"}],"frontMatter":{"title":"Javascript\u6570\u7ec4\u53bb\u91cd\u7684\u51e0\u79cd\u65b9\u6cd5","authors":[{"name":"kart jim","title":"\u672c\u535a\u5ba2\u521b\u9020\u8005","url":"https://github.com/can-dy-jack","image_url":"https://github.com/can-dy-jack.png","imageURL":"https://github.com/can-dy-jack.png"}]},"prevItem":{"title":"Javascript \u51e0\u79cd\u6a21\u5757\u5316\u6807\u51c6","permalink":"/blog/2022/08/27/module-standard"},"nextItem":{"title":"Promises/A+ \u89c4\u8303","permalink":"/blog/js-promise"}},"content":"\u8fd9\u91cc\u4e00\u5171\u603b\u7ed3\u4e86  \u65b9\u6cd5\uff1a\\r\\n1. \u5229\u7528`Set`\\r\\n2. \u53cc\u5c42\u5faa\u73af\u5224\u65ad\u662f\u5426\u76f8\u7b49,`splice()`\u53bb\u6389\u91cd\u590d\u503c\\r\\n3. \u5229\u7528`indexOf`\u53bb\u91cd\\r\\n4. \u5229\u7528`includes()`\\r\\n5. \u5229\u7528\u5faa\u73af\u52a0 `hasOwnProperty()`\\r\\n6. \u5229\u7528`filter`\\r\\n7. \u4f7f\u7528 `Map` \u5bf9\u8c61\\r\\n8. \u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93 [`Lodash`](https://www.lodashjs.com/docs/lodash.uniqWith) \u3001[`Ramda`](https://ramda.cn/docs/#uniq)\\r\\n\\r\\n---\\r\\n\\r\\n\u6d4b\u8bd5\u7528\u6570\u7ec4\uff1a\\r\\n```js\\r\\nvar arr = [\\r\\n  1, 1, 21, 21,0,\\r\\n  \'true\', \'false\',true, false, \'false\', true, \\r\\n  undefined,  null, null, NaN, \'NaN\', NaN, \'NaN\', false, undefined,\\r\\n  0, \'a\', \'a\', \'true\', \\r\\n  {\'name\': \'jim\', \'age\': 20},\\r\\n  {\'age\': 20, \'name\': \'jim\'},\\r\\n  {\'name\': \'kart\', \'age\': 21},\\r\\n  {\'name\': \'kart\', \'age\': 21},\\r\\n  {}, {}\\r\\n];\\r\\n```\\r\\n\\r\\n\x3c!-- truncate --\x3e\\r\\n\\r\\n## \u5229\u7528`Set`\\r\\n\\r\\n```js\\r\\nfunction uniqueArr1(arr) {\\r\\n  return [...new Set(arr)];\\r\\n  // or\\r\\n  // return Array.from(new Set(arr))\\r\\n}\\r\\n```\\r\\n\u7f3a\u70b9\uff1a\u5bf9\u8c61\u65e0\u6cd5\u53bb\u91cd\uff1b\\r\\n\\r\\n**\u53ef\u7528\u4e8e\u53ea\u5305\u542b\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u6570\u7ec4\u53bb\u91cd\u3002**\\r\\n\\r\\n## \u53cc\u5c42\u5faa\u73af\u5224\u65ad\u662f\u5426\u76f8\u7b49,`splice()`\u53bb\u6389\u91cd\u590d\u503c\\r\\n\\r\\n```js\\r\\nfunction uniqueArr2(arr) {\\r\\n  // \u5916\u5c42\u5faa\u73af\u5143\u7d20\uff0c\u5185\u5c42\u5faa\u73af\u65f6\u6bd4\u8f83\u503c\u3002\u503c\u76f8\u540c\u65f6\uff0c\u5219\u5220\u53bb\u8fd9\u4e2a\u503c\u3002\\r\\n  for(let i = 0;i<arr.length;i++) {\\r\\n    for(let j = i+1;j<arr.length;j++) {\\r\\n      if(arr[i] === arr[j]) {\\r\\n        arr.splice(j, 1);\\r\\n        j--;\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n  return arr;\\r\\n}\\r\\n```\\r\\n\u7f3a\u70b9\uff1a\\r\\n- `NaN` \u4e0d\u7b49\u4e8e\u5b83\u672c\u8eab\uff0c\u6240\u4ee5\u4e0d\u80fd\u53bb\u6389\u91cd\u590d\u7684`NaN`\\r\\n- \u5bf9\u8c61\u65e0\u6cd5\u53bb\u91cd\\r\\n\\r\\n## \u5229\u7528`indexOf`\u53bb\u91cd\\r\\n\\r\\n```js\\r\\nfunction uniqueArr3(arr) {\\r\\n  if(!Array.isArray(arr)) {\\r\\n    throw \\"\u4e0d\u662f\u6570\u7ec4\uff01\\"\\r\\n    return;\\r\\n  }\\r\\n  const newArr = [];\\r\\n  for(let i = 0;i<arr.length;i++) {\\r\\n    if(newArr.indexOf(arr[i]) === -1 ) {\\r\\n      newArr.push(arr[i]);\\r\\n    }\\r\\n  }\\r\\n  return newArr;\\r\\n}\\r\\n```\\r\\n\u7f3a\u70b9\uff1a\\r\\n- \u4e0d\u80fd\u53bb\u6389\u91cd\u590d\u7684`NaN`\\r\\n- \u5bf9\u8c61\u65e0\u6cd5\u53bb\u91cd\\r\\n\\r\\n## \u5229\u7528`includes()`\\r\\n\\r\\n```js\\r\\nfunction uniqueArr4(arr) {\\r\\n  if (!Array.isArray(arr)) {\\r\\n      console.log(\'type error!\')\\r\\n      return;\\r\\n  }\\r\\n  var newArr= [];\\r\\n  for (var i = 1; i < arr.length; i++) {\\r\\n      if (!newArr.includes(arr[i])) {\\r\\n          newArr.push(arr[i]);\\r\\n      }\\r\\n  }\\r\\n  return newArr;\\r\\n}\\r\\n```\\r\\n\\r\\n\u6216\u8005\u53ef\u4ee5\u4f7f\u7528 `reduce()` \u65b9\u6cd5\uff1a\\r\\n```js\\r\\nfunction uniqueArr4(arr) {\\r\\n  if (!Array.isArray(arr)) {\\r\\n      console.log(\'type error!\')\\r\\n      return;\\r\\n  }\\r\\n  return arr.reduce((pre, cur) => {\\r\\n    if(pre.includes(cur)) {\\r\\n      return pre;\\r\\n    } else {\\r\\n      return [...pre, cur];\\r\\n    }\\r\\n  },[])\\r\\n}\\r\\n```\\r\\n\\r\\n\u7f3a\u70b9\uff1a\u5bf9\u8c61\u65e0\u6cd5\u53bb\u91cd\\r\\n\\r\\n## \u5229\u7528\u5faa\u73af\u52a0 `hasOwnProperty()` \\r\\n\\r\\n```js\\r\\nfunction uniqueArr5(arr) {\\r\\n  let map = {};\\r\\n  return arr.filter((item, idx, oldArr) => {\\r\\n    if(map.hasOwnProperty(typeof item + \'\' + item)){\\r\\n      return false;\\r\\n    } else {\\r\\n      map[typeof item + \'\' + item] = true\\r\\n      return true;\\r\\n    }\\r\\n  })\\r\\n}\\r\\n```\\r\\n\\r\\n\u7f3a\u70b9\uff1a\u5c06object\u7c7b\u578b\u90fd\u53bb\u6389\u4e86\uff0c\u4ec5\u5269\u4e00\u4e2a\\r\\n\\r\\n## \u5229\u7528`filter`\\r\\n```js\\r\\nfunction uniqueArr6(arr) {\\r\\n  return arr.filter((item, idx, oldArr) => {\\r\\n    return oldArr.indexOf(item) === idx;\\r\\n  })\\r\\n}\\r\\n```\\r\\n\\r\\n\u7f3a\u70b9\uff1a\u5bf9\u8c61\u65e0\u6cd5\u53bb\u91cd\uff0c\u4e0d\u80fd\u8bc6\u522b NaN \u548c \u201dNaN\u201c\\r\\n\\r\\n## \u4f7f\u7528 `Map` \u5bf9\u8c61\\r\\n\\r\\n> \u5229\u7528`Map`\u5bf9\u8c61\u4e2d\u4e0d\u4f1a\u51fa\u73b0\u76f8\u540c\u7684key\u503c\\r\\n\\r\\n```js\\r\\nfunction uniqueArr7(arr) {\\r\\n  let map = new Map();\\r\\n  let newArr = [];\\r\\n  for (let i = 0; i < arr.length; i++) {\\r\\n    if(!map.has(arr[i])) {\\r\\n      map.set(arr[i], true); \\r\\n      newArr.push(arr[i]);\\r\\n    }\\r\\n  }\\r\\n  return newArr;\\r\\n}\\r\\n```\\r\\n\\r\\n\u7f3a\u70b9\uff1a\u5bf9\u8c61\u65e0\u6cd5\u53bb\u91cd\\r\\n\\r\\n## \u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\\r\\n- Lodash\\r\\n  - `_.uniqWith(arr, _.isEqual)`\\r\\n- Ramda\\r\\n  - `R.uniq(arr)`\\r\\n\\r\\n## \u603b\u7ed3\\r\\n\\r\\n\u4ee5\u4e0a\u65b9\u6cd5\u5927\u90e8\u5206\u90fd\u80fd\u5c06\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u91cd\u590d\u6570\u53bb\u6389\uff0c\u4f46\u662f\u65e0\u6cd5\u5c06 object \u7c7b\u578b\u7684\u6570\u636e\u53bb\u91cd\u3002\\r\\n\u5229\u7528\u7b2c\u4e09\u65b9\u5e93\u80fd\u5b8c\u7f8e\u53bb\u91cd\uff0c\u4f46\u662f\u6709\u65f6\u4e3a\u4e86\u4e00\u4e2a\u65b9\u6cd5\u53bb\u5f15\u5165\u4e00\u6574\u4e2a\u5e93\u5e76\u4e0d\u662f\u5341\u5206\u4f18\u96c5\u7684\u505a\u6cd5\u3002\\r\\n\\r\\n\u6240\u4ee5\uff0c\u5f53\u8981\u53bb\u91cd\u7684\u6570\u7ec4\u91cc\u786e\u8ba4\u6ca1\u6709 object \u7c7b\u578b\u7684\u6570\u636e\u65f6\uff0c\u4ee5\u4e0a\u65b9\u6cd5\u57fa\u672c\u4efb\u9009\uff1b\u4f46\u662f\u5982\u679c\u6570\u7ec4\u5185\u4f1a\u6709\u5bf9\u8c61\uff0c\u90a3\u5c31\u8981\u8003\u8651\u5f15\u5165\u7b2c\u4e09\u65b9\u5e93\u6216\u8005\u5728\u51fd\u6570\u4e2d\u5224\u65ad\u5bf9\u8c61\u7c7b\u578b\uff0c\u7136\u540e\u505a\u7279\u6b8a\u5904\u7406\u3002\\r\\n\\r\\n\\r\\n## \u53c2\u8003\u6587\u7ae0\\r\\n- [CSDN - JavaScript\u57fa\u7840 - \u6570\u7ec4\u53bb\u91cd\u768411\u79cd\u65b9\u6cd5](https://blog.csdn.net/YanniLiYnni/article/details/110630008)\\r\\n- [lodash - uniqWith](https://www.lodashjs.com/docs/lodash.uniqWith)\\r\\n- [Ramda - uniq](https://ramda.cn/docs/#uniq)"},{"id":"js-promise","metadata":{"permalink":"/blog/js-promise","editUrl":"https://github.com/can-dy-jack/can-dy-jack.github.io/blog/2022-08-20-promise-aplus.md","source":"@site/blog/2022-08-20-promise-aplus.md","title":"Promises/A+ \u89c4\u8303","description":"Promises/A+ \u89c4\u8303(\u7ffb\u8bd1)","date":"2022-08-20T00:00:00.000Z","formattedDate":"August 20, 2022","tags":[],"readingTime":9.47,"truncated":true,"authors":[{"name":"kart jim","title":"\u672c\u535a\u5ba2\u521b\u9020\u8005","url":"https://github.com/can-dy-jack","image_url":"https://github.com/can-dy-jack.png","imageURL":"https://github.com/can-dy-jack.png"},{"name":"Promises/A+","title":"https://promisesaplus.com/","url":"https://github.com/promises-aplus","image_url":"https://github.com/promises-aplus.png","imageURL":"https://github.com/promises-aplus.png"}],"frontMatter":{"title":"Promises/A+ \u89c4\u8303","description":"Promises/A+ \u89c4\u8303(\u7ffb\u8bd1)","slug":"js-promise","authors":[{"name":"kart jim","title":"\u672c\u535a\u5ba2\u521b\u9020\u8005","url":"https://github.com/can-dy-jack","image_url":"https://github.com/can-dy-jack.png","imageURL":"https://github.com/can-dy-jack.png"},{"name":"Promises/A+","title":"https://promisesaplus.com/","url":"https://github.com/promises-aplus","image_url":"https://github.com/promises-aplus.png","imageURL":"https://github.com/promises-aplus.png"}]},"prevItem":{"title":"Javascript\u6570\u7ec4\u53bb\u91cd\u7684\u51e0\u79cd\u65b9\u6cd5","permalink":"/blog/2022/08/22/unique-arr"},"nextItem":{"title":"JavaScript\u77e5\u8bc6\u4e4b \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","permalink":"/blog/js-copy"}},"content":"\u4ee5\u4e0b\u7ffb\u8bd1\u81ea\u5b98\u7f51\uff1a[promisesaplus.com/](https://promisesaplus.com/)\\r\\n\\r\\n`Promise` \u4ee3\u8868\u5f02\u6b65\u64cd\u4f5c\u7684\u6700\u7ec8\u7ed3\u679c\u3002\u4e0e `Promise` \u4ea4\u4e92\u7684\u4e3b\u8981\u65b9\u5f0f\u662f\u901a\u8fc7\u5176 `then` \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u6ce8\u518c\u56de\u8c03\u4ee5\u63a5\u6536 `Promise` \u7684\u6700\u7ec8\u503c\u6216 `Promise` \u5931\u8d25\u7684\u539f\u56e0\u3002\\r\\n\\r\\n\u8be5\u89c4\u8303\u8be6\u7ec6\u8bf4\u660e\u4e86 `then` \u65b9\u6cd5\u7684\u884c\u4e3a\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u4e92\u64cd\u4f5c\u7684\u57fa\u7840\uff0c\u6240\u6709\u7b26\u5408 `Promises/A+` \u7684 `Promise` \u5b9e\u73b0\u90fd\u53ef\u4ee5\u4f9d\u8d56\u8be5\u57fa\u7840\u6765\u63d0\u4f9b\u3002\u56e0\u6b64\uff0c\u89c4\u8303\u5e94\u8be5\u88ab\u8ba4\u4e3a\u662f\u975e\u5e38\u7a33\u5b9a\u7684\u3002\u5c3d\u7ba1 `Promises/A+` \u7ec4\u7ec7\u53ef\u80fd\u5076\u5c14\u4f1a\u901a\u8fc7\u5fae\u5c0f\u7684\u5411\u540e\u517c\u5bb9\u66f4\u6539\u6765\u4fee\u6539\u6b64\u89c4\u8303\u4ee5\u89e3\u51b3\u65b0\u53d1\u73b0\u7684\u6781\u7aef\u60c5\u51b5\uff0c\u4f46\u53ea\u6709\u5728\u4ed4\u7ec6\u8003\u8651\u3001\u8ba8\u8bba\u548c\u6d4b\u8bd5\u540e\uff0c\u6211\u4eec\u624d\u4f1a\u96c6\u6210\u5927\u7684\u6216\u5411\u540e\u4e0d\u517c\u5bb9\u7684\u66f4\u6539\u3002\\r\\n\\r\\n\u6700\u540e\uff0c\u6838\u5fc3 `Promises/A+` \u89c4\u8303\u4e0d\u6d89\u53ca\u5982\u4f55\u521b\u5efa\u3001\u5c65\u884c\u6216\u62d2\u7edd `Promise`\uff0c\u800c\u662f\u9009\u62e9\u4e13\u6ce8\u4e8e\u63d0\u4f9b\u53ef\u4e92\u64cd\u4f5c\u7684 `then` \u65b9\u6cd5\u3002\\r\\n\\r\\n## 1\u3001\u672f\u8bed\\r\\n- `promise` \u662f\u5177\u6709 `then` \u65b9\u6cd5\u7684**\u5bf9\u8c61\u6216\u51fd\u6570**\uff0c\u5176\u884c\u4e3a\u7b26\u5408\u672c\u89c4\u8303\u3002\\r\\n- `thenable`\u662f\u5b9a\u4e49 `then` \u65b9\u6cd5\u7684\u5bf9\u8c61\u6216\u51fd\u6570\u3002\\r\\n- `value`\u662f\u4efb\u4f55\u5408\u6cd5\u7684 `JavaScript` \u503c\uff08\u5305\u62ec `undefined`\u3001`thenable` \u6216 `promise`\uff09\u3002\\r\\n- `exception`\u662f\u4f7f\u7528 `throw` \u8bed\u53e5\u629b\u51fa\u7684\u503c\u3002\\r\\n- `reason` \u662f\u4e00\u4e2a\u503c\uff0c\u8868\u793a\u4e00\u4e2a `promise` \u88ab\u62d2\u7edd\u7684\u539f\u56e0\u3002\\r\\n\\r\\n\x3c!-- truncate --\x3e\\r\\n\\r\\n## 2\u3001\u8981\u6c42\\r\\n\\r\\n### Promise \u72b6\u6001\\r\\n> `Promise` \u5fc5\u987b\u5904\u4e8e\u4ee5\u4e0b\u4e09\u79cd\u72b6\u6001\u4e4b\u4e00\uff1a `pending`, `fulfilled`, or `rejected`\u3002\xb7\\r\\n\\r\\n1. \u5904\u4e8e `pending` \u72b6\u6001\u65f6\uff0c`Promise` \u53ef\u4ee5\u8f6c\u6362\u5230`fulfilled` \u6216 `rejected` \u72b6\u6001\u3002\\r\\n2. \u5904\u4e8e `fulfilled` \u72b6\u6001\u65f6\uff0c`Promise` \u4e0d\u5f97\u8f6c\u6362\u5230\u5176\u5b83\u72b6\u6001\u3002\\r\\n    - \u5fc5\u987b\u6709\u4e00\u4e2a`value`\uff0c\u5e76\u4e14\u8fd9\u4e2a\u503c\u4e00\u5b9a\u4e0d\u80fd\u6539\u53d8\u3002\\r\\n3. \u5904\u4e8e `rejected` \u72b6\u6001\u65f6\uff0c`Promise` \u4e0d\u5f97\u8f6c\u6362\u5230\u5176\u5b83\u72b6\u6001\u3002\\r\\n    - \u5fc5\u987b\u6709\u4e00\u4e2a`reason`\uff0c\u5e76\u4e14\u8fd9\u4e2a\u503c\u4e00\u5b9a\u4e0d\u80fd\u6539\u53d8\u3002\\r\\n\\r\\n\u8fd9\u91cc\u7684\u4e0d\u5f97\u8f6c\u6362\u610f\u5473\u7740\u5176\u4e0d\u53ef\u53d8\u7684\u5c5e\u6027\uff08\u5373 `===`\uff09\uff0c\u4f46\u5e76\u4e0d\u610f\u5473\u7740\u6df1\u5ea6\u4e0d\u53d8\uff08\u6df1\u5ea6\u5d4c\u5957\u7684\u503c\u53ef\u53d8\uff09\u3002\\r\\n\\r\\n### `then` \u65b9\u6cd5\\r\\n`Promise` \u5fc5\u987b\u63d0\u4f9b `then` \u65b9\u6cd5\u6765\u8bbf\u95ee\u5176\u5f53\u524d\u6216\u6700\u7ec8\u7684 `value`\u6216 `reason`\u3002\\r\\n`Promise` \u7684 `then` \u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\\r\\n\\r\\n```js\\r\\npromise.then(onFulfilled, onRejected)\\r\\n```\\r\\n\\r\\n`onFulfilled` \u548c `onRejected` \u90fd\u662f\u53ef\u9009\u53c2\u6570\uff0c\u5e76\u4e14\u5982\u679c\u5b83\u4eec\u4e0d\u662f\u51fd\u6570\uff0c\u5219\u5fc5\u987b\u5ffd\u7565\u5b83\u3002\\r\\n\\r\\n- \u5982\u679c `onFulfilled` \u662f\u4e00\u4e2a\u51fd\u6570\\r\\n    - \u5b83\u5fc5\u987b\u5728 `promise` \u5b8c\u6210\u540e\u8c03\u7528\uff0c`promise` \u7684 `value` \u4f5c\u4e3a\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\\r\\n    - \u5728 `promise` \u5b8c\u6210\u4e4b\u524d\u4e0d\u80fd\u8c03\u7528\u5b83\\r\\n    - \u4e0d\u80fd\u591a\u6b21\u8c03\u7528\u5b83\u3002\\r\\n- \u5982\u679c `onRejected` \u662f\u4e00\u4e2a\u51fd\u6570\\r\\n    - \u5b83\u5fc5\u987b\u5728 `promise` \u88ab\u62d2\u7edd\u540e\u8c03\u7528\uff0c`promise` \u7684 `reason` \u662f\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\\r\\n    - \u5728 `promise` \u88ab\u62d2\u7edd\u4e4b\u524d\u4e0d\u80fd\u8c03\u7528\u5b83\\r\\n    - \u4e0d\u80fd\u591a\u6b21\u8c03\u7528\u5b83\\r\\n- \u5728\u6267\u884c [`execution context`](https://es5.github.io/#x10.3) \u5806\u6808\uff08\u4ec5\u5305\u542b\u5e73\u53f0\u4ee3\u7801\uff09\u4e4b\u524d\uff0c\u4e0d\u5f97\u8c03\u7528 `onFulfilled` \u6216 `onRejected`\u3002[\u6ce8\u610f\u4e8b\u9879\u7b2c\u4e00\u70b9]\\r\\n- `onFulfilled` \u548c `onRejected` \u5fc5\u987b\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\uff08\u5373\u6ca1\u6709 `this` \u503c\uff09\u3002[\u6ce8\u610f\u4e8b\u9879\u7b2c\u4e8c\u70b9]\\r\\n- `then` \u53ef\u80fd\u4f1a\u5728\u540c\u4e00\u4e2a `Promise` \u4e0a\u88ab\u591a\u6b21\u8c03\u7528\\r\\n    - \u5f53 `Promise` \u88ab\u5b9e\u73b0\uff0c\u6240\u6709\u76f8\u5e94\u7684 `onFulfilled` \u56de\u8c03\u5fc5\u987b\u6309\u7167\u5b83\u4eec\u5bf9 `then` \u7684\u8c03\u7528\u987a\u5e8f\u6267\u884c\u3002\\r\\n    - \u5f53 `promise` \u88ab\u62d2\u7edd\u65f6\uff0c\u6240\u6709\u76f8\u5e94\u7684 `onRejected` \u56de\u8c03\u5fc5\u987b\u6309\u7167\u5b83\u4eec\u5bf9 `then` \u7684\u53d1\u8d77\u8c03\u7528\u7684\u987a\u5e8f\u6267\u884c\u3002\\r\\n- `then` \u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a `promise`[\u6ce8\u610f\u4e8b\u9879\u7b2c\u4e09\u70b9]\\r\\n    ```js\\r\\n    promise2 = promise1.then(onFulfilled, onRejected);\\r\\n    ```\\r\\n    - \u5982\u679c `onFulfilled` \u6216 `onRejected` \u8fd4\u56de\u4e00\u4e2a\u503c `x`\uff0c\u8fd0\u884c`Promise`\u89e3\u51b3\u7a0b\u5e8f `[[Resolve]](promise2, x)`\u3002\\r\\n    - \u5982\u679c `onFulfilled` \u6216 `onRejected` \u629b\u51fa\u4e00\u4e2a\u610f\u5916 `e`\uff0c`promise2` \u5fc5\u987b\u4ee5 `e` \u4e3a `reason` \u88ab `rejected`\u3002\\r\\n    - \u5982\u679c `onFulfilled` \u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u5e76\u4e14 `promise1` \u5904\u4e8e `fulfilled` \u72b6\u6001\uff0c`promise2` \u5fc5\u987b\u4ee5\u4e0e `promise1` \u540c\u6837\u7684 `value` \u8f6c\u53d8\u5230 `fulfilled` \u72b6\u6001\u3002\\r\\n    - \u5982\u679c `onRejected` \u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u5e76\u4e14 `promise1` \u5904\u4e8e `rejected` \u72b6\u6001\uff0c`promise2` \u5fc5\u987b\u4ee5\u4e0e `promise1` \u540c\u6837\u7684 `reason` \u8f6c\u53d8\u5230 `rejected`\u72b6\u6001\u3002\\r\\n\\r\\n### `Promise` \u89e3\u51b3\u7a0b\u5e8f\\r\\n`promise`\u89e3\u51b3\u7a0b\u5e8f\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u64cd\u4f5c\uff0c\u5b83\u628a\u4e00\u4e2a `promise` \u548c\u4e00\u4e2a `value` \u4f5c\u4e3a\u8f93\u5165\uff0c\u6211\u4eec\u5c06\u8fd9\u4e2a\u8868\u793a\u4e3a `[[Resolve]](promise, x)`\u3002\u5982\u679c `x` \u662f\u4e00\u4e2a `thenable` \uff0c\u5b83\u5c06\u4f1a\u8bd5\u56fe\u8ba9 `promise` \u91c7\u7528 `x` \u7684\u72b6\u6001\uff0c\u524d\u63d0\u662f`x`\u7684\u884c\u4e3a\u81f3\u5c11\u6709\u70b9\u50cf\u4e00\u4e2a `promise`\u3002\u5426\u5219\uff0c\u5b83\u5c06\u4f1a\u7528\u503c `x` \u6267\u884c `promise`\u3002\\r\\n\u5bf9\u8fd9\u4e9b `thenable` \u7684\u5904\u7406\u4f7f\u5f97\u4e0e `promise` \u5b9e\u73b0\u65b9\u5f0f\u80fd\u591f\u53bb\u4e92\u76f8\u64cd\u4f5c\u3002\u53ea\u8981\u5b83\u4eec\u516c\u5f00\u4e86\u7b26\u5408 `Promise/A+` \u7684 `then` \u65b9\u6cd5\u3002\u5b83\u8fd8\u4f7f\u5f97 `promises/A+` \u5b9e\u73b0\u65b9\u5f0f\u80fd\u591f\u91c7\u7528\u5408\u7406\u7684 `then` \u65b9\u6cd5\u53bb\u201c\u540c\u5316\u201d\u4e0d\u4e00\u81f4\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\\r\\n\u4e3a\u4e86\u8fd0\u884c`[[Resolve]](promise, x)`\uff0c\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a\\r\\n\\r\\n1. \u5982\u679c `promise` \u548c `x` \u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5219\u4ee5 `TypeError` \u4f5c\u4e3a\u539f\u56e0\u62d2\u7edd `promise`\\r\\n2. \u5982\u679c `x` \u662f\u4e00\u4e2a `promise`\uff0c\u91c7\u7528\u5b83\u7684\u72b6\u6001\uff1a[\u6ce8\u610f\u4e8b\u9879\u7b2c\u56db\u70b9]\\r\\n    1. \u5982\u679c `x` \u5904\u4e8e`pending`\uff0c\u5219 `Promise` \u5fc5\u987b\u4fdd\u6301`pending`\uff0c\u76f4\u5230 `x` \u53d8\u4e3a `fulfilled` \u6216 `rejected`\\r\\n    2. \u5f53 `x` \u662f `fulfilled`\uff0c\u4f7f\u7528\u76f8\u540c\u7684 `value` \u5b9e\u73b0 `promise`\\r\\n    3. \u5f53 `x` \u662f `rejected`\uff0c\u4ee5\u540c\u6837\u7684 `reason` \u62d2\u7edd `promise`\\r\\n3. \u9664\u6b64\u4e4b\u5916\uff0c\u5982\u679c `x` \u662f\u4e00\u4e2a\u5bf9\u8c61\u6216\u51fd\u6570\\r\\n    1. \u4ee4 `then` \u4e3a `x.then`[\u6ce8\u610f\u4e8b\u9879\u7b2c\u4e94\u70b9]\\r\\n    2. \u5982\u679c\u68c0\u7d22\u5c5e\u6027 `x.then` \u5bfc\u81f4\u629b\u51fa\u5f02\u5e38 `e`\uff0c\u5219\u4ee5 `e` \u4e3a `value` \u62d2\u7edd `promise`\\r\\n    3. \u5982\u679c `then` \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5219\u4f7f\u7528 `x` \u4f5c\u4e3a `this`\u3001\u7b2c\u4e00\u4e2a\u53c2\u6570 `resolvePromis`e \u548c\u7b2c\u4e8c\u4e2a\u53c2\u6570 `rejectPromise` \u8c03\u7528\u5b83\uff0c\u5176\u4e2d\uff1a\\r\\n        - \u4f7f\u7528 `value` `y` \u8c03\u7528 `resolvePromise` \u65f6\uff0c\u8fd0\u884c `[[Resolve]](promise, y)`\\r\\n        - \u4f7f\u7528 `reason` `r` \u8c03\u7528 `rejectPromise` \u65f6\uff0c\u4f7f\u7528 `r` \u62d2\u7edd `promise`\\r\\n        - \u5982\u679c\u540c\u65f6\u8c03\u7528\u4e86 `resolvePromise` \u548c `rejectPromise`\uff0c\u6216\u8005\u5bf9\u540c\u4e00\u4e2a\u53c2\u6570\u8fdb\u884c\u4e86\u591a\u6b21\u8c03\u7528\uff0c\u5219\u7b2c\u4e00\u6b21\u8c03\u7528\u4f18\u5148\uff0c\u5e76\u4e14\u4efb\u4f55\u8fdb\u4e00\u6b65\u7684\u8c03\u7528\u90fd\u5c06\u88ab\u5ffd\u7565\u3002\\r\\n        - \u5982\u679c\u8c03\u7528 `then` \u629b\u51fa\u5f02\u5e38 `e`:\\r\\n            - \u5982\u679c\u5df2\u8c03\u7528 `resolvePromise` \u6216 `rejectPromise`\uff0c\u5219\u5ffd\u7565\u5b83\u3002\\r\\n            - \u5426\u5219\uff0c\u4ee5 `e` \u4e3a `reason` \u62d2\u7edd `promise`\\r\\n    4. \u5982\u679c `then` \u4e0d\u662f\u51fd\u6570\uff0c\u5219\u7528 `x` \u5b9e\u73b0 `promise`\\r\\n4. \u5982\u679c `x` \u4e0d\u662f\u5bf9\u8c61\u6216\u51fd\u6570\uff0c\u4f7f\u7528 `x` \u5b9e\u73b0`promise`\\r\\n\\r\\n\u5982\u679c\u4e00\u4e2a\u53c2\u4e0e\u4e86 `thenable` \u5faa\u73af\u94fe\u7684 `thenable` \u53bb `resolve promise`\uff0c\u8fd9\u6837 `[[Resolve]](promise, thenable)` \u7684\u9012\u5f52\u6027\u8d28\u6700\u7ec8\u4f1a\u5bfc\u81f4 `[[Resolve]](promise, thenable)` \u4f1a\u88ab\u518d\u6b21\u8c03\u7528\uff0c\u9075\u5faa\u4e0a\u8ff0\u7b97\u6cd5\u5c06\u4f1a\u5bfc\u81f4\u65e0\u9650\u9012\u5f52\u3002\u6211\u4eec\u9f13\u52b1\u53bb\u5b9e\u73b0\uff08\u4f46\u4e0d\u662f\u5fc5\u9700\u7684\uff09\u68c0\u6d4b\u8fd9\u6837\u7684\u9012\u5f52\uff0c\u5e76\u4ee5 `TypeError` \u4f5c\u4e3a `reason` \u53bb `reject Promise`\u3002[\u6ce8\u610f\u4e8b\u9879\u7b2c\u516d\u70b9]\\r\\n\\r\\n## 3\u3001\u6ce8\u610f\u4e8b\u9879\\r\\n:::danger \u6ce8\u610f\u4e8b\u9879\\r\\n1. \u8fd9\u91cc\u7684\u201c\u5e73\u53f0\u4ee3\u7801\u201d\u6307\u7684\u662f\u5f15\u64ce\uff0c\u73af\u5883\u548c promise \u5b9e\u73b0\u4ee3\u7801\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e2a\u8981\u6c42\u4fdd\u8bc1\u4e86 `onFulfilled` \u548c `onRejected` \u5c06\u4f1a\u5f02\u6b65\u6267\u884c\uff0c\u5728\u4e8b\u4ef6\u5faa\u73af\u4e4b\u540e\uff0c\u7528\u4e00\u4e2a\u65b0\u7684\u5806\u6808\u6765\u8c03\u7528\u5b83\u3002 \u8fd9\u53ef\u4ee5\u901a\u8fc7\u201c\u5b8f\u4efb\u52a1\u201d\u673a\u5236\uff08\u5982 `settimeout`\u6216 `setimmediate` \uff09\u6216\u201c\u5fae\u4efb\u52a1\u201d\u673a\u5236\uff08\u5982 `mutationobserver` \u6216 `process.nextick`\uff09\u6765\u5b9e\u73b0\u3002\u7531\u4e8e `Promise` \u5b9e\u73b0\u88ab\u89c6\u4e3a\u5e73\u53f0\u4ee3\u7801\uff0c\u56e0\u6b64\u5b83\u672c\u8eab\u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u8c03\u5ea6\u961f\u5217\u6216\u201c`trampoline`\u201d\uff0c\u5e76\u5728\u5176\u4e2d\u8c03\u7528\u5904\u7406\u7a0b\u5e8f\u3002\\r\\n2. \u4e5f\u5c31\u662f\u8bf4\uff0c\u5728 strict \u6a21\u5f0f\u4e0b\uff0c\u8fd9\uff08\u6307\u7684\u662fthis\uff09\u5728\u5b83\u4eec\u5185\u90e8\u5c06\u4f1a\u662f undefined\uff1b\u5728\u666e\u901a\u6a21\u5f0f\u4e0b\uff0c\u5b83\u5c06\u4f1a\u662f\u5168\u5c40\u5bf9\u8c61\u3002\\r\\n3. \u5982\u679c\u5b9e\u73b0\u6ee1\u8db3\u6240\u6709\u8981\u6c42\uff0c\u5219\u5b9e\u73b0\u53ef\u80fd\u5141\u8bb8 `promise2 == promise1`\u3002\u6bcf\u4e2a\u5b9e\u73b0\u90fd\u5e94\u8be5\u8bb0\u5f55\u5b83\u662f\u5426\u80fd\u591f\u751f\u6210 `promise2 == promise1` \u4ee5\u53ca\u5728\u4ec0\u4e48\u6761\u4ef6\u4e0b\u3002\\r\\n4. \u4e00\u822c\u6765\u8bf4\uff0c\u53ea\u6709\u5f53 `X` \u6765\u81ea\u5f53\u524d\u7684\u5b9e\u73b0\u65f6\uff0c\u624d\u77e5\u9053\u5b83\u662f\u4e00\u4e2a\u771f\u6b63\u7684 `promise`\u3002\u672c\u6761\u6b3e\u5141\u8bb8\u4f7f\u7528\u7279\u5b9a\u4e8e\u5b9e\u73b0\u7684\u65b9\u6cd5\u6765\u91c7\u7528\u5df2\u77e5\u4e00\u81f4\u627f\u8bfa\u7684\u72b6\u6001\u3002\\r\\n5. \u6b64\u8fc7\u7a0b\u9996\u5148\u5b58\u50a8\u5bf9 x \u7684\u5f15\u7528\uff0c\u7136\u540e\u6d4b\u8bd5\u8be5\u5f15\u7528\uff0c\u7136\u540e\u8c03\u7528\u8be5\u5f15\u7528\uff0c\u907f\u514d\u591a\u6b21\u8bbf\u95ee `x.then` \u5c5e\u6027\u3002\u8fd9\u4e9b\u9884\u9632\u63aa\u65bd\u5bf9\u4e8e\u786e\u4fdd\u8bbf\u95ee\u5668\u5c5e\u6027\u7684\u4e00\u81f4\u6027\u975e\u5e38\u91cd\u8981\uff0c\u8bbf\u95ee\u5668\u5c5e\u6027\u7684\u503c\u53ef\u80fd\u5728\u4e24\u6b21\u68c0\u7d22\u4e4b\u95f4\u53d1\u751f\u66f4\u6539\u3002\\r\\n6. \u5b9e\u73b0\u65b9\u5f0f\u4e2d\u4e0d\u5e94\u5f53\u5728 `thenbale` \u94fe\u4e2d\u7684\u6df1\u5ea6\u8bbe\u7f6e\u4e3b\u89c2\u7684\u9650\u5236\uff0c\u5e76\u4e14\u4e0d\u5e94\u5f53\u5047\u8bbe\u94fe\u7684\u6df1\u5ea6\u8d85\u8fc7\u4e3b\u89c2\u7684\u9650\u5236\u540e\u4f1a\u662f\u65e0\u9650\u7684\u3002\u53ea\u6709\u771f\u6b63\u7684\u5faa\u73af\u624d\u80fd\u5bfc\u81f4`TypeError`\u3002\u5982\u679c\u9047\u5230\u7531\u65e0\u9650\u591a\u4e2a\u4e0d\u540c `thenable` \u7ec4\u6210\u7684\u94fe\uff0c\u90a3\u4e48\u6c38\u8fdc\u9012\u5f52\u662f\u6b63\u786e\u7684\u884c\u4e3a\u3002\\r\\n:::"},{"id":"js-copy","metadata":{"permalink":"/blog/js-copy","editUrl":"https://github.com/can-dy-jack/can-dy-jack.github.io/blog/2022-04-07-js-copy.md","source":"@site/blog/2022-04-07-js-copy.md","title":"JavaScript\u77e5\u8bc6\u4e4b \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","description":"\u503c\u4f20\u9012\u4e0e\u5f15\u7528\u4f20\u9012","date":"2022-04-07T00:00:00.000Z","formattedDate":"April 7, 2022","tags":[],"readingTime":5.56,"truncated":true,"authors":[{"name":"kart jim","title":"front learner","url":"https://localhost:3000","imageURL":"https://github.com/can-dy-jack.png","key":"can-dy-jack"}],"frontMatter":{"title":"JavaScript\u77e5\u8bc6\u4e4b \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","slug":"js-copy","authors":"can-dy-jack"},"prevItem":{"title":"Promises/A+ \u89c4\u8303","permalink":"/blog/js-promise"},"nextItem":{"title":"JavaScript\u6280\u5de7\u4e4bconsole","permalink":"/blog/js-console"}},"content":"## \u503c\u4f20\u9012\u4e0e\u5f15\u7528\u4f20\u9012\\r\\n\\r\\nJavaScript\u4e2d\u6709\u4e24\u79cd\u6570\u636e\u7c7b\u578b\uff1a**\u57fa\u672c\u6570\u636e\u7c7b\u578b**\u548c**\u5f15\u7528\u6570\u636e\u7c7b\u578b**\u4e24\u79cd\u3002  \\r\\n\u4ece\u540d\u5b57\u4e0a\u6765\u770b\uff0c\u5927\u6982\u4e5f\u80fd\u731c\u5230\u5b83\u4eec\u7684\u533a\u522b\uff1a\\r\\n- \u57fa\u672c\u6570\u636e\u7c7b\u578b\\r\\n    - \u503c\u76f4\u63a5\u5b58\u50a8\u5728\u6808\u5185\u5b58\u4e2d\\r\\n- \u5bf9\u4e8e\u5f15\u7528\u7c7b\u578b\u6765\u8bf4\\r\\n    - \u5b83\u5b58\u50a8\u4e86\u4e00\u4e2a\u5f15\u7528\uff0c\u800c\u771f\u6b63\u7684\u6570\u636e\u5b58\u50a8\u5728\u5806\u5185\u5b58\u4e2d\\r\\n\\r\\n\u5f53\u57fa\u672c\u6570\u636e\u7c7b\u578b `a` \u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u57fa\u672c\u6570\u636e\u7c7b\u578b `b` \u65f6\uff0c\u662f\u503c\u4f20\u9012\uff1b\u5f53 `a` \u503c\u53d8\u5316\u540e\uff0c `b` \u7684\u503c\u5e76\u4e0d\u4f1a\u8ddf\u7740\u53d8\u5316\uff1a\\r\\n```js\\r\\nlet a = 5;\\r\\nb = a; // a \u8d4b\u503c\u7ed9b\\r\\nconsole.log(a); // 5\\r\\nconsole.log(b); // 5\\r\\na = 15; // a\u53d8\u5316\\r\\nconsole.log(a); // 15\\r\\nconsole.log(b); // 5\\r\\n```\\r\\n![base1](https://img-blog.csdnimg.cn/464bb76f9d0f42dfb467887ed7100f36.png)\\r\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/1e4aa8590acb48789b3164e38d2e0d41.png)\\r\\n\\r\\n\\r\\n\x3c!-- truncate --\x3e\\r\\n\\r\\n\u800c\u5f53\u5f15\u7528\u6570\u636e\u7c7b\u578b\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u57fa\u672c\u6570\u636e\u7c7b\u578b\u65f6\uff0c\u662f\u5f15\u7528\u4f20\u9012\uff1b\u5f53 `a` \u503c\u53d8\u5316\u540e\uff0c `b` \u7684\u503c\u4f1a\u8ddf\u7740\u53d8\u5316\uff1a\\r\\n```js\\r\\nlet a = [1,2,3,4];\\r\\nb = a; // a \u8d4b\u503c\u7ed9b\\r\\nconsole.log(a); // [ 1, 2, 3, 4 ]\\r\\nconsole.log(b); // [ 1, 2, 3, 4 ]\\r\\na[1] = 15;\\r\\nconsole.log(a); // [ 1, 15, 3, 4 ]\\r\\nconsole.log(b); // [ 1, 15, 3, 4 ] b\u8ddf\u7740\u53d8\u5316\\r\\n```\\r\\n\\r\\n\u4e4b\u6240\u4ee5\u4f1a\u8ddf\u7740\u53d8\u5316\uff0c\u662f\u56e0\u4e3a\u5f15\u7528\u6570\u636e\u7c7b\u578b\u5b58\u50a8\u7684\u662f\u4e00\u4e2a\u5f15\u7528\uff0c\u5f53\u5b83\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u5f15\u7528\u6570\u636e\u65f6\uff0c**\u53ea\u4f1a\u628a\u5f15\u7528\u8d4b\u503c\u7ed9\u5b83**\uff1b\u6240\u4ee5\u5f53\u539f\u6765\u7684\u5f15\u7528\u5bf9\u5e94\u7684\u503c\u53d8\u5316\u4e86\uff0c\u7531\u4e8e\u4e24\u4e2a\u5f15\u7528\u6307\u5411\u7684\u662f\u4e00\u4e2a\u503c\uff0c\u6240\u4ee5\u4e5f\u4f1a\u968f\u7740\u53d8\u5316\u3002\\r\\n\\r\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/a772c501eb3446ffb0fa0171cc8b4afb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAa2FydCBqaW0=,size_20,color_FFFFFF,t_70,g_se,x_16)\\r\\n=>\\r\\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/3ef3b9d0d1964671a971504069da3ff8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAa2FydCBqaW0=,size_20,color_FFFFFF,t_70,g_se,x_16)\\r\\n## \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d\\r\\n\u4e0a\u9762\u6211\u4eec\u77e5\u9053\u4e86\u5f15\u7528\u6570\u636e\u7c7b\u578b\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u5f15\u7528\u6570\u636e\u7c7b\u578b\u65f6\uff0c\u4e24\u4e2a\u53d8\u91cf\u6307\u5411\u540c\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u6d45\u62f7\u8d1d\u3002\\r\\n\\r\\n> \u6d45\u62f7\u8d1d==\u53ea\u62f7\u8d1d\u5bf9\u8c61\u7684\u9876\u7ea7\u5c5e\u6027==\uff0c\u5d4c\u5957\u7684\u5f15\u7528\u7c7b\u578b\u5219\u76f4\u63a5\u590d\u5236\u5f15\u7528\u3002\\r\\n\\r\\n\u4f46\u662f\uff0c\u6709\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u5c06\u4e00\u4e2a\u53d8\u91cf\u4e2d\u7684 \u6240\u6709\u503c\u90fd\u62f7\u8d1d\u4e00\u4efd\uff0c**\u5f53\u88ab\u8d4b\u503c\u7684\u53d8\u91cf\u53d8\u5316\u65f6\u4e0d\u4f1a\u5f71\u54cd\u5230\u539f\u6765\u7684\u53d8\u91cf**\uff1b\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u6df1\u62f7\u8d1d\uff1a\\r\\n\\r\\n\u5bf9\u4e8e\u6709\u5d4c\u5957\u7684\u5f15\u7528\u7c7b\u578b\uff08\u5982\uff1a==js\u5bf9\u8c61==\u3001==\u6570\u7ec4==\u3001==Map==\u3001==Set==\u3001==RegExp==\u7b49\uff09\uff0c\u5c06\u4e00\u4e2a\u53d8\u91cf\u4e2d\u7684 \u6240\u6709\u503c\u90fd\u62f7\u8d1d\u4e00\u4efd\uff0c\u4f7f\u53d8\u5316\u65f6\u4e0d\u5f71\u54cd\u539f\u5148\u53d8\u91cf\uff0c\u5c31\u662f\u6df1\u62f7\u8d1d\u3002\\r\\n\\r\\n\u6df1\u62f7\u8d1d\u6709\u5f88\u591a\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u64b8 `js` \u4ee3\u7801\uff0c\u901a\u8fc7\u9012\u5f52\u5b9e\u73b0\uff1b\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7b2c\u4e09\u65b9\u5e93\u5b9e\u73b0\uff1b\u751a\u81f3\u53ef\u4ee5\u5229\u7528 `JSON`  \u91cc\u7684\u65b9\u6cd5\u5b9e\u73b0\uff1b  \\r\\n\u4e0b\u9762\u4ecb\u7ecd\uff1a\\r\\n### \u5229\u7528 JSON \u65b9\u6cd5\\r\\n> \u8fd9\u79cd\u65b9\u6cd5\u53ea\u9002\u7528\u4e8e \u5bf9 js\u5bf9\u8c61 \u5b9e\u73b0\u6df1\u62f7\u8d1d\uff01\\r\\n\\r\\n`JSON.stringify()`\u548c`JSON.parse()`\uff0c\u53ef\u4ee5\u5c06\u539f\u6765\u7684\u6570\u636e\u5148\u53d8\u5316\u4e3aJSON\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u518d\u8fd8\u539f\u4e3ajs\u5bf9\u8c61\u3002\\r\\n```js\\r\\nlet obj = {\\r\\n    a: [1,3,5,6,[6,7]],\\r\\n    b: new Set([2,3,4]),\\r\\n    c: /string/g\\r\\n}\\r\\nlet objString = JSON.stringify(obj);\\r\\nlet obj2 = JSON.parse(objString);\\r\\nlet obj3 = obj; // \u6d45\u62f7\u8d1d\\r\\n\\r\\nconsole.log(obj); // { a: [ 1, 3, 5, 6, [ 6, 7 ] ], b: Set(3) { 2, 3, 4 }, c: /string/g }\\r\\nconsole.log(obj2); // { a: [ 1, 3, 5, 6, [ 6, 7 ] ], b: {}, c: {} } \u6570\u636e\u4e22\u5931\\r\\nconsole.log(obj === obj2); // false\\r\\nconsole.log(obj === obj3); // true\\r\\n```\\r\\n\\r\\n\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5b9e\u73b0\u6df1\u62f7\u8d1d\u53ef\u80fd\u4f1a\u51fa\u73b0\u6570\u636e\u4e22\u5931\u60c5\u51b5\uff1b\u975e\u5e38\u4e0d\u5efa\u8bae\u4f7f\u7528\\r\\n\\r\\n### \u9012\u5f52\u51fd\u6570\u5b9e\u73b0\\r\\n\u8fd9\u79cd\u65b9\u6cd5\u7684\u60f3\u6cd5\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5229\u7528\u9012\u5f52\u8c03\u7528\uff0c\u5206\u7c7b\u8ba8\u8bba\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7136\u540e\u5bfb\u627e\u53d8\u91cf\u6700\u5e95\u5c42\u7684 \u57fa\u672c\u6570\u636e\u7ed3\u6784\uff0c\u5229\u7528\u503c\u4f20\u9012\u8d4b\u503c\uff0c\u5f00\u8f9f\u65b0\u7684\u5f15\u7528\u3002  \\r\\n\u7b80\u5355\u5b9e\u73b0\uff1a\\r\\n```js\\r\\n// \u7b80\u5355\u5b9e\u73b0\\r\\nfunction deepClone(obj){\\r\\n    // \u57fa\u672c\u6570\u636e\u7c7b\u578b\u672c\u8eab\u5c31\u662f\u503c\u4f20\u9012\\r\\n    if(obj === null || typeof obj !== \'object\'){\\r\\n        return obj;\\r\\n    }\\r\\n    if(obj instanceof Set){ // Set \u7c7b\u578b\\r\\n        const t = new Set();\\r\\n        obj.forEach((val)=>{\\r\\n            t.add(deepClone(val));\\r\\n        })\\r\\n        return t;\\r\\n    } else if(obj instanceof Map){ // Map \u7c7b\u578b\\r\\n        const t = new Map();\\r\\n        obj.forEach((val,i)=>{\\r\\n            t.set(i,deepClone(val));\\r\\n        })\\r\\n        return t;\\r\\n    } else if(obj instanceof RegExp){ // \u6b63\u5219 \u7c7b\u578b\\r\\n        return new RegExp(obj);\\r\\n    } else { // \u5176\u5b83 js\u5bf9\u8c61\\r\\n        const t = new obj.constructor();\\r\\n        for(const i in obj){\\r\\n            t[i] = deepClone(obj[i]);\\r\\n        }\\r\\n        return t;\\r\\n    }\\r\\n}\\r\\n```\\r\\n\u6d4b\u8bd5\uff1a\\r\\n```js\\r\\n// test code\\r\\nconst obj = {\\r\\n    a: 1,\\r\\n    b: new Set([1,2,3,4,new Set([5,6])]),\\r\\n    c: new Map([\\r\\n        [\'a\',\'Number\'],\\r\\n        [\'b\',\'Set\'],\\r\\n        [\'c\',\'Map\'],\\r\\n        [\'d\',\'RegExp\'],\\r\\n        [\'e\',\'Object\']\\r\\n    ]),\\r\\n    d: /^regexp/g,\\r\\n    e: [{a:10},new Date()]\\r\\n}\\r\\nconst deep = deepClone(obj); // \u6df1\u62f7\u8d1d\\r\\nconst shadow = obj; // \u6d45\u62f7\u8d1d\\r\\n\\r\\nconsole.log(obj === deep); // false\\r\\nconsole.log(obj === shadow); // true\\r\\n\\r\\nconsole.log(obj.a === deep.a); // true\\r\\nconsole.log(obj.a === shadow.a); // true\\r\\nconsole.log(obj.b === deep.b); // false\\r\\nconsole.log(obj.b[4] === deep.b[4]); // true\\r\\nconsole.log(obj.b === shadow.b); // true\\r\\n```\\r\\n\\r\\n### \u7b2c\u4e09\u65b9\u5e93\\r\\n\u7b2c\u4e09\u65b9\u5e93\u90fd\u6709\u5c01\u88c5\u597d\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff1a\\r\\n- `Lodash`\u5e93\\r\\n    - `_.cloneDeep(value)`\u65b9\u6cd5\\r\\n- `Ramda`\u5e93\\r\\n    - `R.clone(objects)`\u65b9\u6cd5\\r\\n\\r\\n\\r\\n\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u53bb `github` \u9605\u8bfb\u8fd9\u4e9b\u7b2c\u4e09\u65b9\u5e93\u7684\u5e95\u5c42\u5b9e\u73b0\u539f\u7406\uff1a\\r\\n- [Lodash - github](https://github.com/lodash/lodash)\\r\\n- [Ramda - github](https://github.com/ramda/ramda)\\r\\n- \u2026\u2026"},{"id":"js-console","metadata":{"permalink":"/blog/js-console","editUrl":"https://github.com/can-dy-jack/can-dy-jack.github.io/blog/2021-12-25-javascript-console.md","source":"@site/blog/2021-12-25-javascript-console.md","title":"JavaScript\u6280\u5de7\u4e4bconsole","description":"JavaScript\u6280\u5de7\u4e4bconsole","date":"2021-12-25T00:00:00.000Z","formattedDate":"December 25, 2021","tags":[],"readingTime":3.76,"truncated":true,"authors":[{"name":"kart jim","title":"\u672c\u535a\u5ba2\u521b\u9020\u8005","url":"https://github.com/can-dy-jack","image_url":"https://github.com/can-dy-jack.png","imageURL":"https://github.com/can-dy-jack.png"}],"frontMatter":{"title":"JavaScript\u6280\u5de7\u4e4bconsole","description":"JavaScript\u6280\u5de7\u4e4bconsole","slug":"js-console","authors":[{"name":"kart jim","title":"\u672c\u535a\u5ba2\u521b\u9020\u8005","url":"https://github.com/can-dy-jack","image_url":"https://github.com/can-dy-jack.png","imageURL":"https://github.com/can-dy-jack.png"}]},"prevItem":{"title":"JavaScript\u77e5\u8bc6\u4e4b \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","permalink":"/blog/js-copy"}},"content":"## console.log\\r\\n\\r\\n> \u5411\u63a7\u5236\u53f0\u8f93\u51fa\u4e00\u6761\u4fe1\u606f\u3002\\r\\n\\r\\n\u8bed\u6cd5\uff1a\\r\\n1. \u53ef\u4ee5\u6253\u5370\u4e00\u4e2a\u6216\u591a\u4e2a\u591a\u4e2a\u5bf9\u8c61\\r\\n```javascript\\r\\nlet info = {author:\'jim\', branch: \'main\'};\\r\\nlet info2 = {author:\'jim\', branch: \'main\'};\\r\\nconsole.log(info,info2);\\r\\n// console.log(\'info:\',info);\\r\\n```\\r\\n![log2](https://img-blog.csdnimg.cn/img_convert/07678ae6cc3ab889a1d8e33d4c05784d.png)\\r\\n\\r\\n\\r\\n\x3c!-- truncate --\x3e\\r\\n\\r\\n2. \u4f7f\u7528\u5b57\u7b26\u4e32\u66ff\u6362\\r\\n\\r\\n**\u63a7\u5236\u53f0\u8f93\u51fa\u53ef\u4ee5\u81ea\u5b9a\u4e49css\u6837\u5f0f**\\r\\n```javascript\\r\\nconsole.log(\\"%cRed Text\\", \\"color: red\\");\\r\\nconsole.log(\\"%cRed Text\\", \\"text-shadow: 1px 1px blue;font-weight: bold;\\");\\r\\nconsole.log(\\"%cRed Text\\", \\"font-size: 24px;color:green;\\");\\r\\n// console.log(\\"%cRed Text\\", \\"font-size: 24px;color:#fff;background-color:blue;\\");\\r\\n```\\r\\n![log1](https://img-blog.csdnimg.cn/img_convert/4f83fe0c53ce497c264e358f2d1b103b.png)\\r\\n\\r\\n\uff01_\u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5e76\u4e0d\u652f\u6301\u6240\u6709\u7684css\u6837\u5f0f_ \uff01\\r\\n\\r\\n\u53ef\u4ee5\u63a7\u5236\u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u7c7b\u4f3c\u4e8e `python` \u4e2d\u7684 `format`\\r\\n`console.log(\'String: %s, Int: %d,Float: %f, Object: %o\', \'str\', 2.1, 0.22, info)`\\r\\n\\r\\n\u53c2\u6570\uff1a\\r\\n\\r\\n| Sub str  | \u4f5c\u7528                                                                      |\\r\\n|:--------:|:------------------------------------------------------------------------|\\r\\n| %o or %O | \u6253\u5370 JavaScript \u5bf9\u8c61\u3002\u5728\u5ba1\u9605\u5668\u70b9\u51fb\u5bf9\u8c61\u540d\u5b57\u53ef\u5c55\u5f00\u66f4\u591a\u5bf9\u8c61\u7684\u4fe1\u606f\u3002                                  |\\r\\n| %d or %i | \u6253\u5370\u6574\u6570\u3002\u652f\u6301\u6570\u5b57\u683c\u5f0f\u5316\u3002\u4f8b\u5982, console.log(\\"Foo %.2d\\", 1.1) \u4f1a\u8f93\u51fa\u6709\u5148\u5bfc 0 \u7684\u4e24\u4f4d\u6709\u6548\u6570\u5b57: Foo 01\u3002 |\\r\\n|    %s    | \u6253\u5370\u5b57\u7b26\u4e32\u3002                                                                  |\\r\\n|    %f    | \u6253\u5370\u6d6e\u70b9\u6570\u3002\u652f\u6301\u683c\u5f0f\u5316\uff0c\u6bd4\u5982 console.log(\\"Foo %.2f\\", 1.1) \u4f1a\u8f93\u51fa\u4e24\u4f4d\u5c0f\u6570: Foo 1.10           |\\r\\n|    %c    | \u6253\u5370\u5e26\u6709css\u683c\u5f0f\u7684\u6587\u5b57                                                            |\\r\\n\\r\\n\\r\\n3. \u8fd8\u652f\u6301\u53d8\u91cf\u5360\u4f4d\u7b26\\r\\n\\r\\n```javascript\\r\\nlet temp = new Array(6).fill(1);\\r\\nconsole.log(`temp\u7684\u503c\u4e3a: ${temp}`);\\r\\n```\\r\\n\\r\\n### console.error\\r\\n> \u5411 Web \u63a7\u5236\u53f0\u8f93\u51fa\u4e00\u6761\u9519\u8bef\u6d88\u606f\u3002\\r\\n\\r\\n`console.exception()` \u662f `console.error()` \u7684\u522b\u540d,\u5b83\u4eec\u529f\u80fd\u76f8\u540c,\u4f46\u662f`console.exception()`\u5df2\u7ecf\u88ab\u5f03\u7528\u3002\\r\\n\\r\\n1. \u57fa\u672c\u4f7f\u7528\uff1a\u5411\u63a7\u5236\u53f0\u8f93\u51fa\u9519\u8bef\u4fe1\u606f `console.error(\'error\')`  \\r\\n   ![error](https://img-blog.csdnimg.cn/img_convert/46710b505c55f79d701132d40bd25ea1.png)\\r\\n\\r\\n2. \u53ef\u4ee5\u7ed9\u591a\u4e2a\u53c2\u6570\uff0c\u4f1a\u62fc\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f93\u51fa\uff1a `console.error(\'error\',\'info2\')`\\r\\n3. \u53ef\u4ee5\u63a7\u5236\u8f93\u51fa\u683c\u5f0f(`%c`\u6807\u793a\u8981\u63a7\u5236\u7684\u5b57\u7b26\u4e32)  \\r\\n   `console.error(\'%cError\',\\"font-size: 24px;\\")`  \\r\\n   ![error2](https://img-blog.csdnimg.cn/img_convert/a6e4f841325112a2c36a63d9b0c8f3e9.png)\\r\\n4. \u4f60\u751a\u81f3\u7ed9\u591a\u4e2a\u5b57\u7b26\u4e32\u4e0d\u540c\u7684\u6837\u5f0f\uff1a  \\r\\n   `console.error(\'%cError %cInformation\',\\"font-size: 24px;\\",\\"color:blue;\\") `  \\r\\n   ![error3](https://img-blog.csdnimg.cn/img_convert/664016bac6ce008a54039d9e8302c302.png)\\r\\n\\r\\n5. `console.error()` \u8fd8\u53ef\u4ee5\u7528\u4e8e\u8f93\u51faJavaScript \u5bf9\u8c61\u5217\u8868\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\u6309\u987a\u5e8f\u52a0\u8d77\u6765\u7136\u540e\u8f93\u51fa\u3002\\r\\n```javascript\\r\\nlet infoA = {author:\'jim\', branch: \'main\'}\\r\\nlet infoB = {author:\'jim2\', branch: \'main2\'}\\r\\nlet infoC = {author:\'jim3\', branch: \'main3\'}\\r\\nconsole.error(infoA,infoB,infoC)\\r\\n```\\r\\n![error4](https://img-blog.csdnimg.cn/img_convert/ef25bfc41d30545e43c051dfb349e767.png)\\r\\n\\r\\n\u548c `console.log()` \u4e00\u6837\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5b57\u7b26\u4e32\u66ff\u6362:\\r\\n`console.error(\'String: %s, Int: %d,Float: %f, Object: %o\', \'str\', 2.1, 0.22, info)`\\r\\n\\r\\n### \u5176\u5b83console\u65b9\u6cd5\\r\\n\\r\\n- console.warn()\\r\\n    - \u5411\u63a7\u5236\u53f0\u8f93\u51fa\u4e00\u4e2a\u8b66\u544a\u4fe1\u606f\uff0c`console.warn()` \u5f88\u5e38\u7528\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c `console.error` \u4e00\u6837\u3002\\r\\n- console.assert()\\r\\n    - \u5982\u679c\u65ad\u8a00\u4e3afalse\uff0c\u5219\u5c06\u4e00\u4e2a\u9519\u8bef\u6d88\u606f\u5199\u5165\u63a7\u5236\u53f0\u3002\u5982\u679c\u65ad\u8a00\u662f true\uff0c\u6ca1\u6709\u4efb\u4f55\u53cd\u5e94\u3002\\r\\n    - \u4f8b\u5b50\uff1a`console.assert(false, \'your code has %s\', \'error\')`\\r\\n- console.clear();\\r\\n    - \u6e05\u7a7a\u63a7\u5236\u53f0\uff0c\u5e76\u8f93\u51fa\u4fe1\u606f\\r\\n    - \u53ef\u4ee5\u7701\u7565 `console` \u76f4\u63a5 `clear()`\\r\\n- console.table()\\r\\n    - \u6253\u5370\u8868\u683c\uff1a `console.table([\'jim\',\'smith\',\'angular\'])`\\r\\n\\r\\n![table](https://img-blog.csdnimg.cn/img_convert/5da2b13922accaabf459c196ace71dba.png)  \\r\\n\u6253\u5370\u8868\u683c\u8fd8\u53ef\u4ee5\u591a\u79cd\u82b1\u6837\uff0c\u53ef\u4ee5\u53c2\u8003[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Console/table)\\r\\n- console.group()\\r\\n    - \u53ef\u4ee5\u4f7f\u7528\u5d4c\u5957\u7ec4\u6765\u628a\u89c6\u89c9\u4e0a\u76f8\u5173\u7684\u5143\u7d20\u5408\u5e76\uff0c\u4ee5\u534f\u52a9\u7ec4\u7ec7\u4f60\u7684\u8f93\u51fa\u3002\\r\\n    - \u4f7f\u7528console.group()\u521b\u5efa\u65b0\u7684\u5d4c\u5957\u5757\uff0c\u6216\u8005\u7528console.groupCollapsed() \u521b\u5efa\u9ed8\u8ba4\u6298\u53e0\u7684\u5757\\r\\n    - \u8fd9\u79cd\u5757\u9700\u8981\u70b9\u51fb\u95ed\u5408\u6309\u94ae\u6765\u5c55\u5f00\u624d\u80fd\u8bfb\u5230\u3002\\r\\n- **console.time()**\\r\\n    - \u8ba1\u7b97\u4e00\u6bb5\u7279\u5b9a\u64cd\u4f5c\u7684\u5468\u671f\u3002\\r\\n    - console.time() \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u8ba1\u65f6\u5668\uff0c\u5176\u53c2\u6570\u8868\u793a\u4e86\u8ba1\u65f6\u5668\u7684\u540d\u5b57\u3002\\r\\n    - console.timeLog(),\u8f93\u51fa\u5230\u73b0\u5728\u4e3a\u6b62\u7ecf\u8fc7\u7684\u6beb\u79d2\u6570;\\r\\n    -  console.timeEnd() \u65b9\u6cd5\u5173\u95ed\u8ba1\u65f6\u5668\uff0c\u5e76\u83b7\u53d6\u7ecf\u8fc7\u7684\u6beb\u79d2\u6570\uff0c\u540c\u6837\u4ee5\u8ba1\u65f6\u5668\u7684\u540d\u5b57\u4f5c\u4e3a\u53c2\u6570\\r\\n\\r\\n\\r\\n## \u53c2\u8003\u6587\u6863\\r\\n\\r\\n- [MDN-Console/error](https://developer.mozilla.org/zh-CN/docs/Web/API/Console/error)\\r\\n- [MDN-Console](https://developer.mozilla.org/zh-CN/docs/Web/API/Console#outputting_text_to_the_console)"}]}')}}]);